{"remainingRequest":"/Users/wuchao/Documents/share/testOne/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wuchao/Documents/share/testOne/src/views/Login.vue?vue&type=style&index=0&id=17ecf3c4&lang=stylus&scoped=true&","dependencies":[{"path":"/Users/wuchao/Documents/share/testOne/src/views/Login.vue","mtime":1558424407033},{"path":"/Users/wuchao/Documents/share/testOne/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/wuchao/Documents/share/testOne/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/wuchao/Documents/share/testOne/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/wuchao/Documents/share/testOne/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/wuchao/Documents/share/testOne/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wuchao/Documents/share/testOne/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.all-login\n    width 100%\n    height 100%\n    padding 0 48px\n    background: linear-gradient(to bottom, #ffffff, #e6ddf1, #e6ddf1,#e6ddf1, #3b6e9e);\n    .login-submit\n        width 135px\n        height 135px\n        margin-top -65px\n        text-align center\n    .login-bg\n        width 650px\n        margin-top 75px\n    .login-info\n        background #f5f3fb\n        border-radius 30px\n        padding 30px 30px\n        width 100%\n        height 460px\n        display flex\n        flex-direction column\n        .login-name\n            width 100%\n            height 100px\n            background #fff\n            border-radius 30px\n            text-align left\n            display flex\n            margin-top 50px\n            img\n                text-align left\n                margin-left 30px\n                width 65px\n                height 75px\n                margin-top 12px\n            input\n                margin-left 100px\n                width 350px\n                outline none\n                font-size 50px\n                color #3b6e9e\n                background white\n                border none\n    .login-error\n        background #f5f3fb\n        border-radius 30px\n        padding 30px 30px\n        margin-top 60px\n        width 100%\n        height 360px\n        text-align left\n        .error-title\n            font-size 70px\n            display flex\n            margin-left 80px\n            margin-top 30px\n            img\n                width 100px\n                height 100px\n                margin-right 20px\n        .error-info\n            margin-left 80px\n            font-size 40px\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"all-login\">\n        <img class=\"login-bg\" src=\"../assets/login-bg.png\"/>\n        <div class=\"login-info\" v-if=\"!isLoginError\">\n            <div class=\"login-name\">\n                <img src=\"../assets/people.png\"/>\n                <input type=\"text\" placeholder=\"门店编号\" v-model=\"code\"/>\n            </div>\n            <div class=\"login-name\">\n                <img src=\"../assets/phone.png\"/>\n                <input type=\"text\" placeholder=\"手机号\" v-model=\"phone\"/>\n            </div>\n        </div>\n\n        <div class=\"login-error\" v-if=\"isLoginError\">\n            <div class=\"error-title\">\n                <img src=\"../assets/login-error.png\"/> 无法登陆\n            </div>\n            <div class=\"error-info\">1.您未入围</div>\n            <div class=\"error-info\">2.门店编号或手机号输入有误</div>\n        </div>\n\n        <img class=\"login-submit\" :src=src @click=\"doLogin\"/>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"Login\",\n        data() {\n            return {\n                isLoginError: false,\n                longitude: 0,\n                latitude: 0,\n                code: '',\n                phone: '',\n                user: {},\n                src: require('../assets/login-submit.png')\n            }\n        },\n        methods: {\n            getLocation() {\n                let _thit = this\n                var map = new BMap.Map(\"allmap\");\n                var point = new BMap.Point(116.331398,39.897445);\n                map.centerAndZoom(point,12);\n\n                var geolocation = new BMap.Geolocation();\n                geolocation.getCurrentPosition(function(r){\n                    if(this.getStatus() == BMAP_STATUS_SUCCESS){\n                        var mk = new BMap.Marker(r.point);\n                        map.addOverlay(mk);\n                        map.panTo(r.point);\n                        _thit.longitude = r.point.lng\n                        _thit.latitude = r.point.lat\n                        // debugger\n                        // this.address = result.formattedAddress\n                        // alert('您的位置：' + JSON.stringify(r.address) + r.point.lng+','+r.point.lat);\n                    } else {\n                        // alert('failed'+this.getStatus());\n                    }\n                },{enableHighAccuracy: true})\n            },\n            loginBack() {\n                this.src = require('../assets/login-submit.png')\n                this.isLoginError = false\n            },\n            loginError() {\n                this.src = require('../assets/login-back.png')\n                this.isLoginError = true\n            },\n            doLogin() {\n                this.$bmob.initialize('5341f8e254942033b3dae717daa7eed5', '4e0664824ca488cccad8fe1508a2baa0');\n                if (!this.isLoginError) {\n                    this.$bmob.User.login(this.code,this.phone).then(res => {\n                        this.user = res\n                        this.loginSuccess()\n                        console.log(res)\n                    }).catch(err => {\n                        this.loginError()\n                        console.log(err)\n                    });\n\n                } else {\n                    this.loginBack()\n                }\n\n            },\n            loginSuccess() {\n                this.$router.push({name: 'rule', params:{code: this.user, longitude: this.longitude, latitude: this.latitude}});\n            }\n        },\n        created() {\n            this.getLocation()\n        }\n    }\n</script>\n\n<style lang=\"stylus\" scoped>\n    .all-login\n        width 100%\n        height 100%\n        padding 0 48px\n        background: linear-gradient(to bottom, #ffffff, #e6ddf1, #e6ddf1,#e6ddf1, #3b6e9e);\n        .login-submit\n            width 135px\n            height 135px\n            margin-top -65px\n            text-align center\n        .login-bg\n            width 650px\n            margin-top 75px\n        .login-info\n            background #f5f3fb\n            border-radius 30px\n            padding 30px 30px\n            width 100%\n            height 460px\n            display flex\n            flex-direction column\n            .login-name\n                width 100%\n                height 100px\n                background #fff\n                border-radius 30px\n                text-align left\n                display flex\n                margin-top 50px\n                img\n                    text-align left\n                    margin-left 30px\n                    width 65px\n                    height 75px\n                    margin-top 12px\n                input\n                    margin-left 100px\n                    width 350px\n                    outline none\n                    font-size 50px\n                    color #3b6e9e\n                    background white\n                    border none\n        .login-error\n            background #f5f3fb\n            border-radius 30px\n            padding 30px 30px\n            margin-top 60px\n            width 100%\n            height 360px\n            text-align left\n            .error-title\n                font-size 70px\n                display flex\n                margin-left 80px\n                margin-top 30px\n                img\n                    width 100px\n                    height 100px\n                    margin-right 20px\n            .error-info\n                margin-left 80px\n                font-size 40px\n</style>"]}]}