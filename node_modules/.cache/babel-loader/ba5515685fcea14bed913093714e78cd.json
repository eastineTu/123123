{"remainingRequest":"/Users/wuchao/Documents/H5/testOne/node_modules/thread-loader/dist/cjs.js!/Users/wuchao/Documents/H5/testOne/node_modules/babel-loader/lib/index.js!/Users/wuchao/Documents/H5/testOne/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wuchao/Documents/H5/testOne/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wuchao/Documents/H5/testOne/src/components/uploadImg.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wuchao/Documents/H5/testOne/src/components/uploadImg.vue","mtime":1562420064592},{"path":"/Users/wuchao/Documents/H5/testOne/node_modules/cache-loader/dist/cjs.js","mtime":1562420058310},{"path":"/Users/wuchao/Documents/H5/testOne/node_modules/thread-loader/dist/cjs.js","mtime":1562420064150},{"path":"/Users/wuchao/Documents/H5/testOne/node_modules/babel-loader/lib/index.js","mtime":1562420058164},{"path":"/Users/wuchao/Documents/H5/testOne/node_modules/cache-loader/dist/cjs.js","mtime":1562420058310},{"path":"/Users/wuchao/Documents/H5/testOne/node_modules/vue-loader/lib/index.js","mtime":1562420064290}],"contextDependencies":[],"result":["import _typeof from \"/Users/wuchao/Documents/H5/testOne/node_modules/@babel/runtime-corejs2/helpers/esm/typeof\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'uploadimg',\n  props: {\n    upType: {\n      type: String,\n      default: ''\n    },\n    imgSrc: {}\n  },\n  data: function data() {\n    return {};\n  },\n  methods: {\n    // 选择图片并上传\n    getFile: function getFile(e) {\n      var _this = this;\n\n      var file = e.target.files[0];\n      if (!file) return;\n      this.imgSrc = window.URL.createObjectURL(file);\n      this.$bmob.initialize('6cc51f95f96811441ba8e4754ac01f26', 'f3037695274e2983ee6b99b7e3e952b0');\n      var bmobFile = this.$bmob.File(file.name, file);\n      this.$emit('progress', 50);\n      this.showLoading(true);\n      bmobFile.save().then(function (res) {\n        _this.showLoading(false);\n\n        _this.$emit('imageSrc', res[0]);\n\n        _this.$emit('progress', 100);\n      });\n    },\n    showLoading: function showLoading(show) {\n      if (show) {\n        document.getElementById(\"over\").style.display = \"block\";\n        document.getElementById(\"layout\").style.display = \"block\";\n      } else {\n        document.getElementById(\"over\").style.display = \"none\";\n        document.getElementById(\"layout\").style.display = \"none\";\n      }\n    },\n    photoCompress: function photoCompress(file, w, objDiv) {\n      if (file.tagName.toLocaleLowerCase() == \"img\") {\n        this.canvasDataURL(file.src, w, objDiv);\n        return false;\n      }\n\n      var ready = new FileReader();\n      /*开始读取指定的Blob对象或File对象中的内容. 当读取操作完成时,readyState属性的值会成为DONE,如果设置了onloadend事件处理程序,则调用之.同时,result属性中将包含一个data: URL格式的字符串以表示所读取文件的内容.*/\n\n      ready.readAsDataURL(file);\n\n      ready.onload = function () {\n        var re = this.result;\n        this.canvasDataURL(re, w, objDiv);\n      };\n    },\n    canvasDataURL: function canvasDataURL(re, w, objDiv) {\n      var newImg = new Image();\n      newImg.src = re;\n      var imgWidth,\n          imgHeight,\n          offsetX = 0,\n          offsetY = 0;\n\n      newImg.onload = function () {\n        var img = document.createElement(\"img\");\n        img.src = newImg.src;\n        imgWidth = img.width;\n        imgHeight = img.height;\n        var canvas = document.createElement(\"canvas\");\n        canvas.width = w;\n        canvas.height = w;\n        var ctx = canvas.getContext(\"2d\");\n        ctx.clearRect(0, 0, w, w);\n\n        if (imgWidth > imgHeight) {\n          imgWidth = w * imgWidth / imgHeight;\n          imgHeight = w;\n          offsetX = -Math.round((imgWidth - w) / 2);\n        } else {\n          imgHeight = w * imgHeight / imgWidth;\n          imgWidth = w;\n          offsetY = -Math.round((imgHeight - w) / 2);\n        }\n\n        ctx.drawImage(img, offsetX, offsetY, imgWidth, imgHeight);\n        var base64 = canvas.toDataURL(\"image/jpeg\", 0.7);\n\n        if (_typeof(objDiv) == \"object\") {\n          objDiv.appendChild(canvas);\n        } else if (typeof objDiv == \"function\") {\n          objDiv(base64);\n        }\n      };\n    }\n  },\n  created: function created() {}\n};",{"version":3,"sources":["uploadImg.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"uploadImg\" id=\"uploadImg\">\n        <div class=\"uploadImg_pop\">\n            <img alt=\"\" :src=\"imgSrc\">\n            <input id=\"profilePhotoFileUpload\" v-if=\"upType\" type=\"file\" @change=\"getFile\" accept=\"image/*\" :capture=\"upType\"/>\n            <input v-else type=\"file\" @change=\"getFile\" accept=\"image/*\"/>\n        </div>\n        <div id=\"over\" class=\"overLoading\"></div>\n        <div id=\"layout\" class=\"layoutLoading\"><img src=\"../assets/loding.gif\" /></div>\n    </div>\n</template>\n<script>\n    export default {\n        name: 'uploadimg',\n        props: {\n            upType: {\n                type: String,\n                default: ''\n            },\n            imgSrc: {}\n        },\n        data() {\n            return {\n            }\n        },\n        methods: {\n            // 选择图片并上传\n            getFile(e) {\n                let file = e.target.files[0]\n                if (!file) return\n                this.imgSrc = window.URL.createObjectURL(file)\n\n                this.$bmob.initialize('6cc51f95f96811441ba8e4754ac01f26', 'f3037695274e2983ee6b99b7e3e952b0')\n                let bmobFile = this.$bmob.File(file.name, file);\n                this.$emit('progress', 50)\n                this.showLoading(true)\n                bmobFile.save().then(res => {\n                    this.showLoading(false)\n                    this.$emit('imageSrc', res[0])\n                    this.$emit('progress', 100)\n                })\n            },\n            showLoading(show){\n                if(show){\n                    document.getElementById(\"over\").style.display = \"block\";\n                    document.getElementById(\"layout\").style.display = \"block\";\n                }else{\n                    document.getElementById(\"over\").style.display = \"none\";\n                    document.getElementById(\"layout\").style.display = \"none\";\n                }\n\n            },\n            photoCompress(file,w,objDiv){\n                if(file.tagName.toLocaleLowerCase()==\"img\"){\n                    this.canvasDataURL(file.src,w,objDiv);\n                    return false;\n                }\n                var ready=new FileReader();\n                /*开始读取指定的Blob对象或File对象中的内容. 当读取操作完成时,readyState属性的值会成为DONE,如果设置了onloadend事件处理程序,则调用之.同时,result属性中将包含一个data: URL格式的字符串以表示所读取文件的内容.*/\n                ready.readAsDataURL(file);\n                ready.onload=function(){\n                    var re=this.result;\n                    this.canvasDataURL(re,w,objDiv)\n                }\n            },\n            canvasDataURL(re,w,objDiv){\n                var newImg=new Image();\n                newImg.src=re;\n                var imgWidth,imgHeight,offsetX=0,offsetY=0;\n                newImg.onload=function(){\n                    var img=document.createElement(\"img\");\n                    img.src=newImg.src;\n                    imgWidth=img.width;\n                    imgHeight=img.height;\n                    var canvas=document.createElement(\"canvas\");\n                    canvas.width=w;\n                    canvas.height=w;\n                    var ctx=canvas.getContext(\"2d\");\n                    ctx.clearRect(0,0,w,w);\n                    if(imgWidth>imgHeight){\n                        imgWidth=w*imgWidth/imgHeight;\n                        imgHeight=w;\n                        offsetX=-Math.round((imgWidth-w)/2);\n                    }else{\n                        imgHeight=w*imgHeight/imgWidth;\n                        imgWidth=w;\n                        offsetY=-Math.round((imgHeight-w)/2);\n                    }\n                    ctx.drawImage(img,offsetX,offsetY,imgWidth,imgHeight);\n                    var base64=canvas.toDataURL(\"image/jpeg\",0.7);\n                    if(typeof objDiv == \"object\"){\n                        objDiv.appendChild(canvas);\n                    }else if(typeof objDiv==\"function\"){\n                        objDiv(base64);\n                    }\n                }\n        }\n        },\n        created () {\n        }\n    }\n</script>\n<style lang=\"stylus\" scoped>\n    .uploadImg\n        width 100%\n        overflow-x hidden\n        display flex\n        text-align center\n        .uploadImg_list_item\n            margin auto\n            position relative\n            transition all 0.3s linear\n            .uploadImg_list_item_img\n                width 100%\n                height 100%\n        .uploadImg_pop\n            margin auto\n            width 180px\n            height 180px\n            line-height 180px\n            text-align center\n            overflow hidden\n            position relative\n            img\n                width 180px\n                height 180px\n            input[type='file']\n                position absolute\n                left 0\n                top 0\n                width 100%\n                height 100%\n                opacity: 0;\n        .overLoading\n            display: none;\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background-color: #f5f5f5;\n            opacity:0.5;\n            z-index: 1000;\n        .layoutLoading\n            display: none;\n            position: absolute;\n            top: 40%;\n            left: 40%;\n            width: 20%;\n            height: 20%;\n            z-index: 1001;\n            text-align:center;\n</style>\n"],"sourceRoot":"src/components"}]}